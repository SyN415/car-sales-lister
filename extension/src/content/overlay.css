/* ================================================================
   Car Sales Lister â€“ Marketplace Overlay
   Glassmorphism-styled badges, panels, and deal indicators
   ================================================================ */

/* ----- Reset & Namespace ----- */
.csl-overlay, .csl-overlay * {
  box-sizing: border-box;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  line-height: 1.4;
  -webkit-font-smoothing: antialiased;
}

/* ----- Deal Badge (feed/search cards) ----- */
.csl-badge {
  position: absolute;
  top: 8px;
  right: 8px;
  z-index: 9999;
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 5px 10px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.3px;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.15);
  box-shadow: 0 4px 16px rgba(0,0,0,0.25);
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
  pointer-events: auto;
}
.csl-badge:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.35);
}
.csl-badge-icon { font-size: 13px; }
.csl-badge-text { white-space: nowrap; }
.csl-badge-price { font-size: 10px; opacity: 0.85; white-space: nowrap; }

/* Deal tiers */
.csl-badge--great { background: rgba(16,185,129,0.85); color: #fff; }
.csl-badge--good  { background: rgba(245,158,11,0.85); color: #fff; }
.csl-badge--fair  { background: rgba(249,115,22,0.85); color: #fff; }
.csl-badge--over  { background: rgba(239,68,68,0.85); color: #fff; }
.csl-badge--unknown { background: rgba(100,116,139,0.8); color: #fff; }
.csl-badge--login { background: rgba(37,99,235,0.85); color: #fff; }

/* ----- Detail Panel (floating sidebar) ----- */
.csl-panel {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 99999;
  width: 320px;
  border-radius: 16px;
  background: rgba(15,23,42,0.92);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255,255,255,0.1);
  box-shadow: 0 8px 32px rgba(0,0,0,0.4);
  color: #e2e8f0;
  overflow: hidden;
  transition: transform 0.25s cubic-bezier(0.4,0,0.2,1), opacity 0.25s ease;
  animation: csl-slide-up 0.3s cubic-bezier(0.4,0,0.2,1);
}
@keyframes csl-slide-up {
  from { transform: translateY(20px); opacity: 0; }
  to   { transform: translateY(0); opacity: 1; }
}

.csl-panel--collapsed { transform: translateY(calc(100% - 44px)); }

.csl-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px;
  background: rgba(255,255,255,0.05);
  border-bottom: 1px solid rgba(255,255,255,0.08);
  cursor: pointer;
  user-select: none;
}
.csl-panel-title {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  font-weight: 700;
  color: #f1f5f9;
}
.csl-panel-close {
  background: none;
  border: none;
  color: #94a3b8;
  font-size: 18px;
  cursor: pointer;
  padding: 0 2px;
  line-height: 1;
}
.csl-panel-close:hover { color: #f1f5f9; }

.csl-panel-body { padding: 14px; }

/* Vehicle Info */
.csl-vehicle-name {
  font-size: 15px;
  font-weight: 600;
  color: #f8fafc;
  margin-bottom: 4px;
}
.csl-vehicle-meta {
  font-size: 11px;
  color: #94a3b8;
  margin-bottom: 12px;
}

/* Price Comparison */
.csl-price-row {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  padding: 6px 0;
  font-size: 13px;
}
.csl-price-label { color: #94a3b8; }
.csl-price-value { font-weight: 700; }
.csl-price-asking { color: #f8fafc; font-size: 18px; }
.csl-price-market { color: #10b981; font-size: 16px; }
.csl-price-range  { color: #64748b; font-size: 11px; }

.csl-divider {
  border: none;
  border-top: 1px solid rgba(255,255,255,0.08);
  margin: 10px 0;
}

/* Deal Score Bar */
.csl-score-section { margin: 8px 0; }
.csl-score-bar-track {
  width: 100%;
  height: 8px;
  background: rgba(255,255,255,0.1);
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 6px;
}

/* Score colors */
.csl-score-bar-fill--great, .csl-score-tag--great { background: #10b981; color: #fff; }
.csl-score-bar-fill--good,  .csl-score-tag--good  { background: #f59e0b; color: #fff; }
.csl-score-bar-fill--fair,  .csl-score-tag--fair   { background: #f97316; color: #fff; }
.csl-score-bar-fill--over,  .csl-score-tag--over   { background: #ef4444; color: #fff; }

/* Savings indicator */
.csl-savings {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 10px;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 600;
  margin: 8px 0;
}
.csl-savings--positive { background: rgba(16,185,129,0.15); color: #34d399; }
.csl-savings--negative { background: rgba(239,68,68,0.15); color: #f87171; }

/* Action Buttons */
.csl-actions { display: flex; gap: 8px; margin-top: 12px; }

.csl-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
  padding: 8px 12px;
  border: none;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s ease, transform 0.1s ease;
}
.csl-btn:active { transform: scale(0.97); }

.csl-btn--primary {
  background: #10b981;
  color: #fff;
}
.csl-btn--primary:hover { background: #059669; }
.csl-btn--primary.csl-btn--added {
  background: rgba(16,185,129,0.2);
  color: #34d399;
  cursor: default;
}

.csl-btn--secondary {
  background: rgba(255,255,255,0.08);
  color: #cbd5e1;
  border: 1px solid rgba(255,255,255,0.1);
}
.csl-btn--secondary:hover { background: rgba(255,255,255,0.14); }

/* Login prompt inside panel */
.csl-login-prompt {
  text-align: center;
  padding: 16px 10px;
}
.csl-login-prompt p {
  font-size: 12px;
  color: #94a3b8;
  margin-bottom: 10px;
}

/* Tooltip on badge hover */
.csl-badge-tooltip {
  position: absolute;
  top: calc(100% + 6px);
  right: 0;
  min-width: 180px;
  padding: 8px 10px;
  border-radius: 8px;
  background: rgba(15,23,42,0.95);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.1);
  box-shadow: 0 4px 16px rgba(0,0,0,0.3);
  font-size: 11px;
  color: #e2e8f0;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.15s ease;
  z-index: 10000;
}
.csl-badge:hover .csl-badge-tooltip { opacity: 1; pointer-events: auto; }
.csl-badge-tooltip-row {
  display: flex;
  justify-content: space-between;
  padding: 2px 0;
}

/* Loading spinner */
.csl-spinner {
  display: inline-block;
  width: 14px;
  height: 14px;
  border: 2px solid rgba(255,255,255,0.3);
  border-top-color: #fff;
  border-radius: 50%;
  animation: csl-spin 0.6s linear infinite;
}
@keyframes csl-spin {
  to { transform: rotate(360deg); }
}

/* Responsive: Hide panel on very small viewports */
@media (max-width: 480px) {
  .csl-panel { width: calc(100vw - 20px); right: 10px; bottom: 10px; }
}
.csl-score-bar-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.6s cubic-bezier(0.4,0,0.2,1);
}
.csl-score-label {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 12px;
}
.csl-score-tag {
  padding: 2px 8px;
  border-radius: 4px;
  font-weight: 700;
  font-size: 11px;
  letter-spacing: 0.3px;
}

